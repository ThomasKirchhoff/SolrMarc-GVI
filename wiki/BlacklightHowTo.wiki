#summary Getting started in Blacklight with the binary distribution of Solrmarc.
#labels Phase-Deploy

=== About This Document ===

This getting started guide describes the SolrMarc binary distribution for Blacklight, defines its software dependencies, guides the user through using the SolrMarc binary to index a file of MARC records.

<br/>
=== About !SolrMarc ===

SolrMarc is a utility that reads in MARC records from a file, extracts information from various fields as specified in an indexing configuration script, and adds that information to a specified SOLR index.

SolrMarc provides a rich set of techniques for mapping the tags, fields, and subfields contained in the MARC record to the fields you wish to include in your SOLR index record, but it also allows the creation of custom index functions if you cannot achieve what you require using the predefined mapping techniques.

Currently, SolrMarc is configured to work with:
  * [http://blacklightopac.org/ Blacklight]
  * [VufindHowTo Vufind]


NOTE: If you anticipate a need for custom indexing functions, you will need to download the SolrMarc source code and build the package using the instructions from the [GettingStarted] document on this wiki.

<br />
=== Software Dependencies ===

SolrMarc requires the java development kit (JDK) version 1.5 or newer.

To check the version of the java development kit (JDK), at the command prompt type

   _javac -version_

To download the proper version of the java development kit, go to http://java.sun.com/javase/downloads/index.jsp

<br/>
=== Downloading the !SolrMarc Binary Distribution ===

To get the binary distribution, download {{{Binary_Generic_Blacklight_SolrMarc_Unix.tar.gz}}} or {{{Binary_Generic_Blacklight_SolrMarc_PC.tar.gz}}} from [http://code.google.com/p/solrmarc/downloads/list the project's downloads page]. The binary distribution consists of a single large jar file containing all of the code, libraries and data files to configure and run SolrMarc.

The only difference between the two binary distributions is that the Unix version contains a number of bash shell scripts for running the !SolrMarc indexer or for running the the other utility programs associated with running !SolrMarc, whereas the PC version of the binary distribution contain batch files to perform the same tasks. 

<br />
=== Unpacking the Binary Distribution ===

SolrMarc uses a series of Java properties files for its configuration, these are stored inside the single large jar file that is included in the binary distribution. Some of the values in these properties files need to be set before you will be able to run SolrMarc to produce an index for your Blacklight installation. The main configuration file is named blacklight_config.properties, an example of it is shown below: 
{{{
 # Path to your solr instance
 solr.path = /usr/local/blacklight/solr
 solr.core.name = biblio
 solr.indexer = BlacklightIndexer
 solr.indexer.properties = blacklight.properties
 #optional URL of running solr search engine to cause updates to be recognized.
 solr.hosturl = http://localhost:8983/solr/update
 marc.to_utf_8 = true
 marc.permissive = true
 marc.default_encoding = MARC8
 marc.include_errors = false
}}}

<br />

=== Using !SolrMarc ===

If you unpack the binary distribution into a directory named {{{import}}} inside the Blacklight distribution, all you need to do is run two shell scripts to configure the SolrMarc indexer. 

First run: 
  import/setsolrwar ./solr/jetty/webapps/solr.war 

then run: 

   import/setsolrhome ./solr 

You will then be ready index MARC record into the solr index that will be used by Blacklight via either of the following two commands: 

   import/import /path/to/marcrecords.mrc 
or 

   import/indexfile /path/to/marcrecords.mrc 

The first of these will merely print "Now Importing /path/to/marcrecords.mrc ..." and quietly import all of the record in that file. The second will be somewhat more verbose as it processes records, displaying informational messages and warnings while it is running. 